# Chainalytic Framework

## The Purpose

There is a huge amount of data deep
inside blockchains which could bring
potential valuable insights. +

*This framework focuses on* 

- _Rebuild *implicit* historical blockchain data from transactions ( transition functions )_
- _Realtime time-series data aggregation_

*It helps to easily extract, transform, aggregate
and generate new data using your own rule
in a modular style.*

*Note*: it is *not* the tool that simply extracts chain data and dumps to big-data dataset (e.g. BigQuery)

It targets developers who are interested in building application for

- Blockchain analytic and insights
- Monitoring tools
- Data science, machine learning and AI
- Algo trading

I am also a big fan of link:https://icon.foundation[ICON], thus it comes with one built-in data aggregator for ICON public mainnet.

## Architecture

image::docs/resource/chainalytic.png[]

### Chainalytic services

- Upstream
- Aggregator
- Warehouse
- Provider

### Chainalytic Console

Handle data aggregation monitoring.

## Getting started

*Prerequisite ( Ubuntu 18.04 )*

`sudo apt install libsecp256k1-dev libleveldb-dev pkg-config`

### 1. Chainalytic Console

*You must setup user config first, run below command to generate it*

`venv/bin/python launch.py --init-config`

*Then, in current working dir, there should be 2 config files*

`.chainalytic/cfg/chain_registry.yml` +
`.chainalytic/cfg/setting.yml`

In `chain_registry.yml`, for ICON public chain, modify it like below
----
zones:
  - zone_id: 'public-icon'
    zone_name: 'Public ICON mainnet'
    client_endpoint: 'https://ctz.solidwallet.io'
    chain_db_dir: 'path_to/data/mainnet/.storage/db_<YOUR_IP>:7100_icon_dex'
    score_db_icondex_dir: 'path_to/data/mainnet/.score_data/db/icon_dex'
----

*Run all services and monitor them*

`venv/bin/python launch.py`

*Terminate all services*

`venv/bin/python launch.py clean`

*Show help*

`venv/bin/python launch.py -h`

### 2. Chainalytic services

*Run individual services ( for debugging )*

`venv/bin/python -m chainalytic.upstream --endpoint localhost:5500 --zone_id public-icon --working_dir .` +
`venv/bin/python -m chainalytic.aggregator --endpoint localhost:5510 --zone_id public-icon --working_dir .` +
`venv/bin/python -m chainalytic.warehouse --endpoint localhost:5520 --zone_id public-icon --working_dir .` +
`venv/bin/python -m chainalytic.provider --endpoint localhost:5530 --zone_id public-icon --working_dir .`
